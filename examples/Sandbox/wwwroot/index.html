<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<title>BLambda.Shell</title>
	<base href="/" />

	<!--<link href="./_content/Tyts.BLambda.Blazor.Wasm/css/bl-reboot.min.css" rel="stylesheet" />-->
	<!--todo: .template.min.css should be added by applying site template-->
	<!--<link href="./_content/Tyts.BLambda.Shell.Templates.Default/css/default.template.min.css" rel="stylesheet" />-->

	<!--do NOT remove: inject scoped css from this proj and all referensed-->
	<link href="Sandbox.styles.css" rel="stylesheet" />

	<link rel="modulepreload" href="js/shell.min.js" />
</head>

<body>
	<div id="app">
		<script src="_content/Microsoft.FluentUI.AspNetCore.Components/js/loading-theme.js" type="text/javascript"></script>
		<loading-theme storage-name="theme"></loading-theme>	

		<div id="loader">
			<svg class="loading-progress">
				<circle r="40%" cx="50%" cy="50%" />
				<circle r="40%" cx="50%" cy="50%" />
			</svg>
			<div class="logo"></div>
			<div class="loading-progress-text"></div>
		</div>

		<script type="text/javascript">
			function IsDark(storageName) {
				const modeSaved = JSON.parse(localStorage?.getItem(storageName))?.mode ?? "";
				const isSystemDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

				switch (modeSaved) {
					case "dark":
						return true;
					case "light":
						return false;
					default:
						return isSystemDark ? true : false;
				}
			};

			const bg = getComputedStyle(document.body).getPropertyValue('background-color');
			document.documentElement.style.setProperty('--blambda-bg-color', bg);

			const logo = document.querySelector('.logo');
			if (IsDark("theme")) {
				logo.classList.add('invert');
			}
		</script>

	</div>
	<div id="blazor-error-ui">
		<h1>Error'd, Bro</h1>
		<p>Show me your face</p>
		<p><span frown>:(</span></p>

		<a href="" class="reload">Reload</a>
		<a class="dismiss">ðŸ—™</a>
	</div>

	<script src="./_content/Tyts.BLambda.Blazor.Wasm/js/bl.auth.cognito.min.js"></script>
	<script src="_framework/blazor.webassembly.js" autostart="true"></script>
	<script type="module">
		//import { loader } from "/js/shell.min.js";
		//Blazor.start({
		//	loadBootResource: function (type, name, defaultUri, integrity) {
		//		return loader.fetch(type, name, defaultUri, integrity);
		//	}
		//});
	</script>
</body>

</html>
